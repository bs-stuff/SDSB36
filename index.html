<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    <title>SB 36 Action - Insurance Agents Take Action</title>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@400;500;600;700;800&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAz7sOz7lAaC1ImZMCnPu9yoTvcbBvTt3A&libraries=places"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --red-dark: #8b1a1a;
            --red-mid: #b22222;
            --red-light: #cd5c5c;
            --orange-accent: #e87a3d;
            --cream: #faf8f5;
            --cream-dark: #f0ebe3;
            --text-dark: #1a1a1a;
            --text-mid: #4a4a4a;
            --blue-pro: #1e4a6d;
            --blue-light: #3a7ca5;
        }

        body {
            font-family: 'Outfit', sans-serif;
            background: var(--cream);
            color: var(--text-dark);
            min-height: 100vh;
            line-height: 1.6;
        }

        .app-container {
            max-width: 900px;
            margin: 0 auto;
            padding: 1.25rem 1.5rem 3rem;
        }

        /* Header - compact */
        .header {
            text-align: center;
            margin-bottom: 1rem;
            padding-bottom: 1rem;
            border-bottom: 2px solid var(--blue-pro);
        }

        .header-icon {
            font-size: 2rem;
            margin-bottom: 0.25rem;
        }

        .header h1 {
            font-size: 1.75rem;
            font-weight: 800;
            color: var(--blue-pro);
            margin-bottom: 0.25rem;
        }

        .header p {
            color: var(--text-mid);
            font-size: 0.95rem;
            max-width: 600px;
            margin: 0 auto;
        }

        .bill-badge {
            display: inline-block;
            background: var(--blue-pro);
            color: white;
            padding: 0.2rem 0.75rem;
            border-radius: 50px;
            font-weight: 600;
            font-size: 0.8rem;
            margin-bottom: 0.5rem;
        }

        /* Alert - inline compact */
        .alert-box {
            background: #f0f7ff;
            border-left: 4px solid var(--blue-pro);
            border-radius: 8px;
            padding: 0.75rem 1rem;
            margin-bottom: 1rem;
            font-size: 0.9rem;
            line-height: 1.4;
        }

        .alert-box strong {
            color: var(--blue-pro);
        }

        /* Steps - compact */
        .steps {
            display: flex;
            justify-content: center;
            gap: 0.5rem;
            margin-bottom: 1rem;
        }

        .step {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.6rem 1.25rem;
            background: white;
            border-radius: 50px;
            font-size: 0.9rem;
            font-weight: 500;
            color: var(--text-mid);
            border: 2px solid var(--cream-dark);
            cursor: pointer;
            transition: all 0.15s ease;
        }

        .step:hover {
            border-color: var(--blue-light);
        }

        .step.active {
            background: var(--blue-pro);
            color: white;
            border-color: var(--blue-pro);
        }

        .step.completed {
            background: var(--blue-light);
            color: white;
            border-color: var(--blue-light);
        }

        .step.disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .step-num {
            width: 22px;
            height: 22px;
            border-radius: 50%;
            background: var(--cream-dark);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            font-size: 0.75rem;
        }

        .step.active .step-num,
        .step.completed .step-num {
            background: rgba(255,255,255,0.25);
        }

        /* Cards */
        .card {
            background: white;
            border-radius: 14px;
            padding: 1.5rem;
            box-shadow: 0 4px 20px rgba(0,0,0,0.06);
            margin-bottom: 1rem;
        }

        .card-header {
            margin-bottom: 1rem;
        }

        .card-header h2 {
            font-size: 1.2rem;
            font-weight: 700;
            color: var(--blue-pro);
            margin-bottom: 0.15rem;
        }

        .card-header p {
            color: var(--text-mid);
            font-size: 0.9rem;
        }

        /* Tab buttons */
        .tab-row {
            display: flex;
            gap: 0.5rem;
            margin-bottom: 1rem;
        }

        .tab-btn {
            flex: 1;
            padding: 0.75rem;
            border: 2px solid var(--cream-dark);
            border-radius: 10px;
            font-family: 'Outfit', sans-serif;
            font-weight: 600;
            font-size: 0.9rem;
            cursor: pointer;
            background: white;
            color: var(--text-mid);
            transition: all 0.15s ease;
        }

        .tab-btn.active {
            background: var(--blue-pro);
            color: white;
            border-color: var(--blue-pro);
        }

        .tab-btn:hover:not(.active) {
            border-color: var(--blue-light);
        }

        /* Form elements */
        .form-group {
            margin-bottom: 1.25rem;
        }

        .form-group label {
            display: block;
            font-weight: 600;
            margin-bottom: 0.5rem;
            font-size: 0.95rem;
        }

        input[type="text"],
        input[type="tel"],
        textarea {
            width: 100%;
            padding: 0.875rem 1rem;
            font-size: 1rem;
            font-family: 'Outfit', sans-serif;
            border: 2px solid var(--cream-dark);
            border-radius: 10px;
            background: var(--cream);
            transition: all 0.15s ease;
        }

        textarea {
            min-height: 200px;
            resize: vertical;
            line-height: 1.5;
        }

        input:focus,
        textarea:focus {
            outline: none;
            border-color: var(--blue-light);
            background: white;
        }

        input::placeholder,
        textarea::placeholder {
            color: #aaa;
        }

        select {
            width: 100%;
            padding: 0.875rem 1rem;
            font-size: 1rem;
            font-family: 'Outfit', sans-serif;
            border: 2px solid var(--cream-dark);
            border-radius: 10px;
            background: var(--cream);
            cursor: pointer;
        }

        .input-hint {
            font-size: 0.85rem;
            color: var(--text-mid);
            margin-top: 0.5rem;
        }

        .error-message {
            color: var(--red-mid);
            font-size: 0.9rem;
            margin-top: 0.5rem;
        }

        /* Buttons */
        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            padding: 0.875rem 1.75rem;
            font-size: 1rem;
            font-weight: 600;
            font-family: 'Outfit', sans-serif;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.15s ease;
        }

        .btn-primary {
            background: var(--blue-pro);
            color: white;
        }

        .btn-primary:hover {
            background: var(--blue-light);
        }

        .btn-secondary {
            background: var(--cream);
            color: var(--blue-pro);
            border: 2px solid var(--blue-pro);
        }

        .btn-secondary:hover {
            background: var(--cream-dark);
        }

        .btn-send {
            background: var(--blue-pro);
            color: white;
            width: 100%;
            padding: 1.125rem;
            font-size: 1.05rem;
        }

        .btn-send:hover {
            background: var(--blue-light);
        }

        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        /* Committee grid */
        .committee-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(240px, 1fr));
            gap: 0.75rem;
        }

        .member-chip {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            padding: 0.75rem 1rem;
            border-radius: 10px;
            border: 2px solid var(--cream-dark);
            background: white;
            cursor: pointer;
            transition: all 0.15s ease;
        }

        .member-chip:hover {
            border-color: var(--blue-light);
        }

        .member-chip.selected {
            background: var(--blue-pro);
            border-color: var(--blue-pro);
            color: white;
        }

        .chip-check {
            width: 20px;
            height: 20px;
            border-radius: 5px;
            border: 2px solid var(--cream-dark);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.75rem;
            font-weight: bold;
            flex-shrink: 0;
        }

        .member-chip.selected .chip-check {
            background: white;
            border-color: white;
            color: var(--blue-pro);
        }

        .chip-info {
            flex: 1;
            min-width: 0;
        }

        .chip-name {
            font-weight: 600;
            font-size: 0.95rem;
        }

        .chip-role {
            font-size: 0.8rem;
            opacity: 0.75;
        }

        /* District legislator cards */
        .district-grid {
            display: grid;
            gap: 0.75rem;
        }

        .leg-card {
            display: flex;
            align-items: center;
            gap: 1rem;
            padding: 1rem 1.25rem;
            background: var(--cream);
            border-radius: 12px;
            border: 2px solid transparent;
            cursor: pointer;
            transition: all 0.15s ease;
        }

        .leg-card:hover {
            border-color: var(--blue-light);
        }

        .leg-card.selected {
            background: var(--blue-pro);
            color: white;
        }

        .leg-avatar {
            width: 48px;
            height: 48px;
            border-radius: 50%;
            background: var(--blue-pro);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 1.1rem;
            flex-shrink: 0;
        }

        .leg-card.selected .leg-avatar {
            background: var(--blue-light);
        }

        .leg-info { flex: 1; }

        .leg-name {
            font-weight: 600;
            font-size: 1.05rem;
        }

        .leg-role {
            font-size: 0.85rem;
            opacity: 0.8;
        }

        .leg-party {
            padding: 0.25rem 0.6rem;
            border-radius: 50px;
            font-size: 0.8rem;
            font-weight: 600;
            background: rgba(0,0,0,0.1);
        }

        .leg-card.selected .leg-party {
            background: rgba(255,255,255,0.2);
        }

        /* Select all row */
        .select-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
            font-size: 0.9rem;
        }

        .select-all-btn {
            padding: 0.5rem 1rem;
            font-size: 0.85rem;
            font-weight: 600;
            font-family: 'Outfit', sans-serif;
            border: 2px solid var(--blue-pro);
            border-radius: 8px;
            background: white;
            color: var(--blue-pro);
            cursor: pointer;
            transition: all 0.15s ease;
        }

        .select-all-btn:hover {
            background: var(--blue-pro);
            color: white;
        }

        /* Template cards */
        .template-section {
            margin-top: 1.5rem;
            padding-top: 1.5rem;
            border-top: 1px solid var(--cream-dark);
        }

        .template-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 1rem;
        }

        .template-header h3 {
            font-size: 1rem;
            font-weight: 600;
            color: var(--text-dark);
        }

        .template-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 0.75rem;
        }

        .template-card {
            padding: 1rem;
            border: 2px solid var(--cream-dark);
            border-radius: 10px;
            cursor: pointer;
            background: white;
            transition: all 0.15s ease;
        }

        .template-card:hover {
            border-color: var(--blue-light);
        }

        .template-card.selected {
            border-color: var(--blue-pro);
            background: rgba(30, 74, 109, 0.05);
        }

        .template-icon {
            font-size: 1.5rem;
            margin-bottom: 0.35rem;
        }

        .template-name {
            font-weight: 600;
            font-size: 0.9rem;
        }

        .template-desc {
            font-size: 0.8rem;
            color: var(--text-mid);
            line-height: 1.4;
            margin-top: 0.25rem;
        }

        /* Nav buttons */
        .nav-row {
            display: flex;
            gap: 1rem;
            margin-top: 1.5rem;
        }

        .nav-row .btn { flex: 1; }

        /* Recipients chips */
        .recipients-row {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
            margin-bottom: 1.25rem;
        }

        .recipient-chip {
            padding: 0.35rem 0.75rem;
            background: var(--blue-pro);
            color: white;
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: 500;
        }

        /* District badge */
        .district-badge {
            display: inline-block;
            padding: 0.4rem 1rem;
            background: var(--blue-pro);
            color: white;
            border-radius: 50px;
            font-weight: 600;
            font-size: 0.9rem;
            margin-bottom: 1rem;
        }

        /* Footer */
        footer {
            text-align: center;
            margin-top: 2.5rem;
            color: var(--text-mid);
            font-size: 0.85rem;
        }

        footer a { color: var(--blue-pro); }

        /* Reset link */
        .reset-link {
            display: block;
            text-align: center;
            margin-top: 1.25rem;
            color: var(--text-mid);
            font-size: 0.9rem;
            cursor: pointer;
        }

        .reset-link:hover { color: var(--blue-pro); }

        /* Two-column form */
        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1rem;
        }

        /* Mobile adjustments */
        @media (max-width: 600px) {
            .app-container { padding: 1rem 0.75rem 2rem; }
            .header { margin-bottom: 1.25rem; padding-bottom: 1rem; }
            .header h1 { font-size: 1.5rem; }
            .header p { font-size: 0.9rem; }
            .alert-box { padding: 0.75rem 1rem; font-size: 0.85rem; margin-bottom: 1.25rem; }
            .steps { gap: 0.35rem; margin-bottom: 1.25rem; }
            .step { padding: 0.4rem 0.6rem; font-size: 0.75rem; }
            .step-num { width: 18px; height: 18px; font-size: 0.65rem; }
            .card { padding: 1.25rem; border-radius: 12px; }
            .card-header { margin-bottom: 1rem; }
            .card-header h2 { font-size: 1.1rem; }
            .card-header p { font-size: 0.85rem; }
            .tab-row { flex-direction: column; gap: 0.5rem; }
            .tab-btn { padding: 0.75rem; font-size: 0.9rem; }
            .form-row { grid-template-columns: 1fr; }
            .committee-grid { grid-template-columns: 1fr; }
            .template-grid { grid-template-columns: 1fr 1fr; }
            .nav-row { flex-direction: column-reverse; gap: 0.75rem; }
            .member-chip { padding: 0.6rem 0.75rem; }
            .chip-name { font-size: 0.9rem; }
            textarea { min-height: 150px; }
        }

        @media (max-width: 400px) {
            .template-grid { grid-template-columns: 1fr; }
        }

        /* Loading */
        .spinner {
            width: 20px;
            height: 20px;
            border: 2px solid var(--cream-dark);
            border-top-color: var(--blue-pro);
            border-radius: 50%;
            animation: spin 0.8s linear infinite;
            display: inline-block;
            vertical-align: middle;
            margin-right: 0.5rem;
        }

        @keyframes spin { to { transform: rotate(360deg); } }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;

        // SD Legislators (2026)
        const legislators = {
            1: { members: [
                { name: "Michael Rohl", party: "R", email: "michael.rohl@sdlegislature.gov", chamber: "Senate" },
                { name: "Nick Fosness", party: "R", email: "nick.fosness@sdlegislature.gov", chamber: "House" },
                { name: "Logan Manhart", party: "R", email: "logan.manhart@sdlegislature.gov", chamber: "House" },
            ]},
            2: { members: [
                { name: "John Sjaarda", party: "R", email: "john.sjaarda@sdlegislature.gov", chamber: "House" },
                { name: "Steve Kolbeck", party: "R", email: "steve.kolbeck@sdlegislature.gov", chamber: "Senate" },
                { name: "David Kull", party: "R", email: "david.kull@sdlegislature.gov", chamber: "House" },
            ]},
            3: { members: [
                { name: "Al Novstrup", party: "R", email: "al.novstrup@sdlegislature.gov", chamber: "House" },
                { name: "Carl Perry", party: "R", email: "carl.perry@sdlegislature.gov", chamber: "Senate" },
                { name: "Brandei Schaefbauer", party: "R", email: "brandei.schaefbauer@sdlegislature.gov", chamber: "House" },
            ]},
            4: { members: [
                { name: "Stephanie Sauder", party: "R", email: "stephanie.sauder@sdlegislature.gov", chamber: "Senate" },
                { name: "Dylan Jordan", party: "R", email: "dylan.jordan@sdlegislature.gov", chamber: "House" },
                { name: "Kent Roe", party: "R", email: "kent.roe@sdlegislature.gov", chamber: "House" },
            ]},
            5: { members: [
                { name: "Glen Vilhauer", party: "R", email: "glen.vilhauer@sdlegislature.gov", chamber: "Senate" },
                { name: "Josephine Garcia", party: "R", email: "josephine.garcia@sdlegislature.gov", chamber: "House" },
                { name: "Matt Roby", party: "R", email: "matt.roby@sdlegislature.gov", chamber: "House" },
            ]},
            6: { members: [
                { name: "Ernie Otten", party: "R", email: "ernie.otten@sdlegislature.gov", chamber: "Senate" },
                { name: "Aaron Aylward", party: "R", email: "aaron.aylward@sdlegislature.gov", chamber: "House" },
                { name: "Tim Czmowski", party: "R", email: "tim.czmowski@sdlegislature.gov", chamber: "House" },
            ]},
            7: { members: [
                { name: "Tim Reed", party: "R", email: "tim.reed@sdlegislature.gov", chamber: "Senate" },
                { name: "Roger DeGroot", party: "R", email: "roger.degroot@sdlegislature.gov", chamber: "House" },
                { name: "Mellissa Heermann", party: "R", email: "mellissa.heermann@sdlegislature.gov", chamber: "House" },
            ]},
            8: { members: [
                { name: "Casey Crabtree", party: "R", email: "casey.crabtree@sdlegislature.gov", chamber: "Senate" },
                { name: "Tim Reisch", party: "R", email: "tim.reisch@sdlegislature.gov", chamber: "House" },
                { name: "Tim Walburg", party: "R", email: "tim.walburg@sdlegislature.gov", chamber: "House" },
            ]},
            9: { members: [
                { name: "Bethany Soye", party: "R", email: "bethany.soye@sdlegislature.gov", chamber: "House" },
                { name: "Joy Hohn", party: "R", email: "joy.hohn@sdlegislature.gov", chamber: "Senate" },
                { name: "Tesa Schwans", party: "R", email: "tesa.schwans@sdlegislature.gov", chamber: "House" },
            ]},
            10: { members: [
                { name: "Liz Larson", party: "D", email: "liz.larson@sdlegislature.gov", chamber: "Senate" },
                { name: "Bobbi Andera", party: "D", email: "bobbi.andera@sdlegislature.gov", chamber: "House" },
                { name: "Erin Healy", party: "D", email: "erin.healy@sdlegislature.gov", chamber: "House" },
            ]},
            11: { members: [
                { name: "Chris Karr", party: "R", email: "chris.karr@sdlegislature.gov", chamber: "Senate" },
                { name: "Brian Mulder", party: "R", email: "brian.mulder@sdlegislature.gov", chamber: "House" },
                { name: "Keri Weems", party: "R", email: "keri.weems@sdlegislature.gov", chamber: "House" },
            ]},
            12: { members: [
                { name: "Arch Beal", party: "R", email: "arch.beal@sdlegislature.gov", chamber: "Senate" },
                { name: "Amber Arlint", party: "R", email: "amber.arlint@sdlegislature.gov", chamber: "House" },
                { name: "Greg Jamison", party: "R", email: "greg.jamison@sdlegislature.gov", chamber: "House" },
            ]},
            13: { members: [
                { name: "Jack Kolbeck", party: "R", email: "jack.kolbeck@sdlegislature.gov", chamber: "House" },
                { name: "John Hughes", party: "R", email: "john.hughes@sdlegislature.gov", chamber: "House" },
                { name: "Sue Peterson", party: "R", email: "sue.peterson@sdlegislature.gov", chamber: "Senate" },
            ]},
            14: { members: [
                { name: "Larry Zikmund", party: "R", email: "larry.zikmund@sdlegislature.gov", chamber: "Senate" },
                { name: "Tony Kayser", party: "R", email: "tony.kayser@sdlegislature.gov", chamber: "House" },
                { name: "Taylor Rehfeldt", party: "R", email: "taylor.rehfeldt@sdlegislature.gov", chamber: "House" },
            ]},
            15: { members: [
                { name: "Kadyn Wittman", party: "D", email: "kadyn.wittman@sdlegislature.gov", chamber: "House" },
                { name: "Erik Muckey", party: "D", email: "erik.muckey@sdlegislature.gov", chamber: "House" },
                { name: "Jamie Smith", party: "D", email: "jamie.smith@sdlegislature.gov", chamber: "Senate" },
            ]},
            16: { members: [
                { name: "Kevin Jensen", party: "R", email: "kevin.jensen@sdlegislature.gov", chamber: "Senate" },
                { name: "Karla Lems", party: "R", email: "karla.lems@sdlegislature.gov", chamber: "House" },
                { name: "John Shubeck", party: "R", email: "john.shubeck@sdlegislature.gov", chamber: "House" },
            ]},
            17: { members: [
                { name: "Sydney Davis", party: "R", email: "sydney.davis@sdlegislature.gov", chamber: "Senate" },
                { name: "Chris Kassin", party: "R", email: "chris.kassin@sdlegislature.gov", chamber: "House" },
                { name: "William Shorma", party: "R", email: "william.shorma@sdlegislature.gov", chamber: "House" },
            ]},
            18: { members: [
                { name: "Lauren Nelson", party: "R", email: "lauren.nelson@sdlegislature.gov", chamber: "Senate" },
                { name: "Julie Auch", party: "R", email: "julie.auch@sdlegislature.gov", chamber: "House" },
                { name: "Mike Stevens", party: "R", email: "mike.stevens@sdlegislature.gov", chamber: "House" },
            ]},
            19: { members: [
                { name: "Kyle Schoenfish", party: "R", email: "kyle.schoenfish@sdlegislature.gov", chamber: "Senate" },
                { name: "Jessica Bahmuller", party: "R", email: "jessica.bahmuller@sdlegislature.gov", chamber: "House" },
                { name: "Drew Peterson", party: "R", email: "drew.peterson@sdlegislature.gov", chamber: "House" },
            ]},
            20: { members: [
                { name: "Paul Miskimins", party: "R", email: "paul.miskimins@sdlegislature.gov", chamber: "Senate" },
                { name: "Jeff Bathke", party: "R", email: "jeff.bathke@sdlegislature.gov", chamber: "House" },
                { name: "Kaley Nolz", party: "R", email: "kaley.nolz@sdlegislature.gov", chamber: "House" },
            ]},
            21: { members: [
                { name: "Marty Overweg", party: "R", email: "marty.overweg@sdlegislature.gov", chamber: "House" },
                { name: "Jim Halverson", party: "R", email: "jim.halverson@sdlegislature.gov", chamber: "House" },
                { name: "Mykala Voita", party: "R", email: "mykala.voita@sdlegislature.gov", chamber: "Senate" },
            ]},
            22: { members: [
                { name: "Lana Greenfield", party: "R", email: "lana.greenfield@sdlegislature.gov", chamber: "House" },
                { name: "Kevin Van Diepen", party: "R", email: "kevin.vandiepen@sdlegislature.gov", chamber: "House" },
                { name: "Brandon Wipf", party: "R", email: "brandon.wipf@sdlegislature.gov", chamber: "Senate" },
            ]},
            23: { members: [
                { name: "Mark Lapka", party: "R", email: "mark.lapka@sdlegislature.gov", chamber: "Senate" },
                { name: "Spencer Gosch", party: "R", email: "spencer.gosch@sdlegislature.gov", chamber: "House" },
                { name: "Scott Moore", party: "R", email: "scott.moore@sdlegislature.gov", chamber: "House" },
            ]},
            24: { members: [
                { name: "Jim Mehlhaff", party: "R", email: "jim.mehlhaff@sdlegislature.gov", chamber: "Senate" },
                { name: "Will Mortenson", party: "R", email: "will.mortenson@sdlegislature.gov", chamber: "House" },
                { name: "Mike Weisgram", party: "R", email: "mike.weisgram@sdlegislature.gov", chamber: "House" },
            ]},
            25: { members: [
                { name: "Tom Pischke", party: "R", email: "tom.pischke@sdlegislature.gov", chamber: "Senate" },
                { name: "Jon Hansen", party: "R", email: "jon.hansen@sdlegislature.gov", chamber: "House" },
                { name: "Leslie Heinemann", party: "R", email: "leslie.heinemann@sdlegislature.gov", chamber: "House" },
            ]},
            26: { members: [
                { name: "Tamara Grove", party: "R", email: "tamara.grove@sdlegislature.gov", chamber: "Senate" },
                { name: "Eric Emery", party: "D", email: "eric.emery@sdlegislature.gov", chamber: "House" },
                { name: "Rebecca Reimer", party: "R", email: "rebecca.reimer@sdlegislature.gov", chamber: "House" },
            ]},
            27: { members: [
                { name: "Red Dawn Foster", party: "D", email: "reddawn.foster@sdlegislature.gov", chamber: "Senate" },
                { name: "Liz May", party: "R", email: "liz.may@sdlegislature.gov", chamber: "House" },
                { name: "Peri Pourier", party: "D", email: "peri.pourier@sdlegislature.gov", chamber: "House" },
            ]},
            28: { members: [
                { name: "Sam Marty", party: "R", email: "sam.marty@sdlegislature.gov", chamber: "Senate" },
                { name: "Jana Hunt", party: "R", email: "jana.hunt@sdlegislature.gov", chamber: "House" },
                { name: "Travis Ismay", party: "R", email: "travis.ismay@sdlegislature.gov", chamber: "House" },
            ]},
            29: { members: [
                { name: "John Carley", party: "R", email: "john.carley@sdlegislature.gov", chamber: "Senate" },
                { name: "Terri Jorgenson", party: "R", email: "terri.jorgenson@sdlegislature.gov", chamber: "House" },
                { name: "Kathy Rice", party: "R", email: "kathy.rice@sdlegislature.gov", chamber: "House" },
            ]},
            30: { members: [
                { name: "Amber Hulse", party: "R", email: "amber.hulse@sdlegislature.gov", chamber: "Senate" },
                { name: "Tim Goodwin", party: "R", email: "tim.goodwin@sdlegislature.gov", chamber: "House" },
                { name: "Trish Ladner", party: "R", email: "trish.ladner@sdlegislature.gov", chamber: "House" },
            ]},
            31: { members: [
                { name: "Randy Deibert", party: "R", email: "randy.deibert@sdlegislature.gov", chamber: "Senate" },
                { name: "Mary Fitzgerald", party: "R", email: "mary.fitzgerald@sdlegislature.gov", chamber: "House" },
                { name: "Scott Odenbach", party: "R", email: "scott.odenbach@sdlegislature.gov", chamber: "House" },
            ]},
            32: { members: [
                { name: "Helene Duhamel", party: "R", email: "helene.duhamel@sdlegislature.gov", chamber: "Senate" },
                { name: "Steve Duffy", party: "R", email: "steve.duffy@sdlegislature.gov", chamber: "House" },
                { name: "Nicole Uhre-Balk", party: "D", email: "nicole.uhre-balk@sdlegislature.gov", chamber: "House" },
            ]},
            33: { members: [
                { name: "Curt Voight", party: "R", email: "curt.voight@sdlegislature.gov", chamber: "Senate" },
                { name: "Phil Jensen", party: "R", email: "phil.jensen@sdlegislature.gov", chamber: "House" },
                { name: "Curt Massie", party: "R", email: "curt.massie@sdlegislature.gov", chamber: "House" },
            ]},
            34: { members: [
                { name: "Taffy Howard", party: "R", email: "taffy.howard@sdlegislature.gov", chamber: "Senate" },
                { name: "Heather Baxter", party: "R", email: "heather.baxter@sdlegislature.gov", chamber: "House" },
                { name: "Mike Derby", party: "R", email: "mike.derby@sdlegislature.gov", chamber: "House" },
            ]},
            35: { members: [
                { name: "Tina Mulally", party: "R", email: "tina.mulally@sdlegislature.gov", chamber: "House" },
                { name: "Greg Blanc", party: "R", email: "greg.blanc@sdlegislature.gov", chamber: "Senate" },
                { name: "Tony Randolph", party: "R", email: "tony.randolph@sdlegislature.gov", chamber: "House" },
            ]},
        };

        // House Commerce & Energy Committee
        const committee = [
            { name: "Karla Lems", party: "R", email: "karla.lems@sdlegislature.gov", role: "Chair", district: 16 },
            { name: "Jessica Bahmuller", party: "R", email: "jessica.bahmuller@sdlegislature.gov", role: "Vice Chair", district: 19 },
            { name: "Aaron Aylward", party: "R", email: "aaron.aylward@sdlegislature.gov", role: "Member", district: 6 },
            { name: "Steve Duffy", party: "R", email: "steve.duffy@sdlegislature.gov", role: "Member", district: 32 },
            { name: "Lana Greenfield", party: "R", email: "lana.greenfield@sdlegislature.gov", role: "Member", district: 22 },
            { name: "Tony Kayser", party: "R", email: "tony.kayser@sdlegislature.gov", role: "Member", district: 14 },
            { name: "Tina Mulally", party: "R", email: "tina.mulally@sdlegislature.gov", role: "Member", district: 35 },
            { name: "Kaley Nolz", party: "R", email: "kaley.nolz@sdlegislature.gov", role: "Member", district: 20 },
            { name: "Drew Peterson", party: "R", email: "drew.peterson@sdlegislature.gov", role: "Member", district: 19 },
            { name: "Tesa Schwans", party: "R", email: "tesa.schwans@sdlegislature.gov", role: "Member", district: 9 },
            { name: "William Shorma", party: "R", email: "william.shorma@sdlegislature.gov", role: "Member", district: 17 },
            { name: "Mike Weisgram", party: "R", email: "mike.weisgram@sdlegislature.gov", role: "Member", district: 24 },
            { name: "Nicole Uhre-Balk", party: "D", email: "nicole.uhre-balk@sdlegislature.gov", role: "Member", district: 32 },
        ];

        // Pre-made templates
        const templates = [
            {
                id: "subrogation",
                name: "Subrogation Rights",
                icon: "‚öñÔ∏è",
                desc: "Focus on carriers' recovery rights",
                text: (leg, name, city, agency) => `Dear ${leg.chamber === "Senate" ? "Senator" : "Representative"} ${leg.name.split(' ').pop()},

My name is ${name}${agency ? `, and I am an insurance agent with ${agency}` : ''} in ${city}, South Dakota. I am writing regarding SB 36.

As someone who works in insurance, I have concerns about how this bill affects carriers' subrogation rights when utilities cause wildfires. When a utility-caused fire destroys property, insurance pays the claim. Under current law, carriers can pursue the responsible utility to recover costs, which keeps premiums affordable.

SB 36 creates significant barriers to that recovery. Those unrecovered costs will ultimately be passed to policyholders through higher premiums or reduced coverage in fire-prone areas.

I urge you to consider these impacts as this bill moves forward.

Sincerely,
${name}${agency ? '\n' + agency : ''}
${city}, SD`
            },
            {
                id: "premiums",
                name: "Premium Impact",
                icon: "üí∞",
                desc: "How costs shift to policyholders",
                text: (leg, name, city, agency) => `Dear ${leg.chamber === "Senate" ? "Senator" : "Representative"} ${leg.name.split(' ').pop()},

I am ${name}${agency ? ` with ${agency}` : ''}, writing from ${city} regarding SB 36.

This bill will impact insurance costs for South Dakota homeowners and businesses. When utilities cause wildfires and insurers can't recover from the responsible party, those costs spread across policyholders through higher premiums.

We've seen this pattern in other states with similar legislation. I ask that you carefully consider the premium implications for South Dakota consumers as you evaluate this bill.

Respectfully,
${name}${agency ? '\n' + agency : ''}
${city}, SD`
            },
            {
                id: "accountability",
                name: "Utility Accountability",
                icon: "üîå",
                desc: "Infrastructure maintenance incentives",
                text: (leg, name, city, agency) => `Dear ${leg.chamber === "Senate" ? "Senator" : "Representative"} ${leg.name.split(' ').pop()},

My name is ${name}${agency ? ` from ${agency}` : ''} in ${city}. I am writing about SB 36.

Current liability standards provide an important incentive for utilities to maintain safe infrastructure. I'm concerned that SB 36 may reduce that incentive by limiting accountability when equipment failures cause fires.

I respectfully ask that any changes to utility liability maintain strong incentives for proper maintenance and safety investments.

Thank you,
${name}${agency ? '\n' + agency : ''}
${city}, SD`
            },
            {
                id: "balance",
                name: "Balanced Approach",
                icon: "‚öñÔ∏è",
                desc: "Support amendments that protect all parties",
                text: (leg, name, city, agency) => `Dear ${leg.chamber === "Senate" ? "Senator" : "Representative"} ${leg.name.split(' ').pop()},

I am ${name}${agency ? `, an insurance agent with ${agency}` : ''} in ${city}, writing about SB 36.

I understand there are legitimate interests on multiple sides of this issue. However, I believe amendments are needed to better balance utility protections with the rights of wildfire victims and insurance carriers to pursue recovery.

I support a balanced approach that encourages utility investment in safety while preserving reasonable paths to recovery for those harmed by negligence.

I appreciate your consideration.

Sincerely,
${name}${agency ? '\n' + agency : ''}
${city}, SD`
            },
            {
                id: "market",
                name: "Market Stability",
                icon: "üìä",
                desc: "Insurance market concerns",
                text: (leg, name, city, agency) => `Dear ${leg.chamber === "Senate" ? "Senator" : "Representative"} ${leg.name.split(' ').pop()},

My name is ${name}${agency ? ` with ${agency}` : ''} in ${city}. As an insurance professional, I'm writing about SB 36's potential impact on our market.

South Dakota currently has a stable, competitive property insurance market. Shifting significant potential losses onto insurers without recovery options could destabilize that market, leading to rate increases or reduced availability in some areas.

I urge you to consider these market implications as the bill is evaluated.

Respectfully,
${name}${agency ? '\n' + agency : ''}
${city}, SD`
            }
        ];

        function App() {
            const [step, setStep] = useState(1);
            const [mode, setMode] = useState(null);
            const [district, setDistrict] = useState(null);
            const [selected, setSelected] = useState([]);
            const [customMessage, setCustomMessage] = useState('');
            const [selectedTemplate, setSelectedTemplate] = useState(null);
            const [firstName, setFirstName] = useState('');
            const [lastName, setLastName] = useState('');
            const [city, setCity] = useState('');
            const [phone, setPhone] = useState('');
            const [agency, setAgency] = useState('');
            const [error, setError] = useState('');
            const [loading, setLoading] = useState(false);
            const [sending, setSending] = useState(false);
            const [matchedAddr, setMatchedAddr] = useState('');

            const inputRef = useRef(null);
            const acRef = useRef(null);
            const fullName = [firstName, lastName].filter(Boolean).join(' ');

            // Navigation helpers
            const canGoToStep = (s) => {
                if (s === 1) return true;
                if (s === 2) return selected.length > 0;
                if (s === 3) return selected.length > 0;
                return false;
            };

            const goToStep = (s) => {
                if (canGoToStep(s)) setStep(s);
            };

            // Google Places
            useEffect(() => {
                if (!inputRef.current || !window.google || acRef.current) return;
                const bounds = new window.google.maps.LatLngBounds(
                    new window.google.maps.LatLng(42.4, -104.5),
                    new window.google.maps.LatLng(46.0, -96.4)
                );
                acRef.current = new window.google.maps.places.Autocomplete(inputRef.current, {
                    types: ['address'],
                    componentRestrictions: { country: 'us' },
                    bounds,
                    strictBounds: true,
                    fields: ['formatted_address', 'geometry', 'address_components']
                });
                acRef.current.addListener('place_changed', async () => {
                    const place = acRef.current.getPlace();
                    if (!place.geometry) { setError('Select an address from dropdown'); return; }
                    const state = place.address_components?.find(c => c.types.includes('administrative_area_level_1'));
                    if (state?.short_name !== 'SD') { setError('Please enter a South Dakota address'); return; }
                    const cityComp = place.address_components?.find(c => c.types.includes('locality'));
                    if (cityComp) setCity(cityComp.long_name);
                    setMatchedAddr(place.formatted_address);
                    await lookupDistrict(place.geometry.location.lat(), place.geometry.location.lng());
                });
            }, [mode]);

            const lookupDistrict = async (lat, lng) => {
                setLoading(true);
                setError('');
                try {
                    const url = `https://tigerweb.geo.census.gov/arcgis/rest/services/TIGERweb/Legislative/MapServer/identify?geometry=${lng},${lat}&geometryType=esriGeometryPoint&sr=4326&layers=all:1&tolerance=0&mapExtent=-104,43,-96,46&imageDisplay=800,600,96&returnGeometry=false&f=json`;
                    const res = await fetch(url);
                    const data = await res.json();
                    if (data.results?.length > 0) {
                        const num = parseInt(data.results[0].attributes.BASENAME || data.results[0].attributes.NAME, 10);
                        if (legislators[num]) { setDistrict(num); }
                        else { setError(`District ${num} not found.`); }
                    } else { setError('Could not determine district.'); }
                } catch { setError('Error looking up district.'); }
                setLoading(false);
            };

            const toggle = (leg) => {
                const id = leg.email;
                if (selected.find(l => l.email === id)) {
                    setSelected(selected.filter(l => l.email !== id));
                } else {
                    setSelected([...selected, leg]);
                }
            };

            const isSelected = (leg) => selected.some(l => l.email === leg.email);

            const selectAllCommittee = () => {
                const all = committee.every(m => isSelected(m));
                setSelected(all ? [] : [...committee]);
            };

            const applyTemplate = (t) => {
                if (selectedTemplate?.id === t.id) {
                    setSelectedTemplate(null);
                    setCustomMessage('');
                } else {
                    setSelectedTemplate(t);
                    const sampleLeg = selected[0] || { name: 'Legislator', chamber: 'House' };
                    setCustomMessage(t.text(sampleLeg, fullName || '[Your Name]', city || '[Your City]', agency));
                }
            };

            const getMessage = (leg) => {
                if (customMessage.trim()) {
                    // Replace placeholder names with actual legislator
                    let msg = customMessage;
                    const title = leg.chamber === "Senate" ? "Senator" : "Representative";
                    const lastName = leg.name.split(' ').pop();
                    // Try to replace the salutation if it exists
                    msg = msg.replace(/Dear (Senator|Representative) \w+,/, `Dear ${title} ${lastName},`);
                    return msg;
                }
                return `Dear ${leg.chamber === "Senate" ? "Senator" : "Representative"} ${leg.name.split(' ').pop()},

I am writing regarding SB 36.

[Your message here]

Sincerely,
${fullName || '[Your Name]'}${agency ? '\n' + agency : ''}
${city || '[Your City]'}, SD`;
            };

            const sendEmails = () => {
                setSending(true);
                selected.forEach((leg, i) => {
                    setTimeout(() => {
                        const msg = getMessage(leg);
                        const subj = encodeURIComponent('Regarding SB 36 - Utility Wildfire Liability');
                        window.open(`mailto:${leg.email}?subject=${subj}&body=${encodeURIComponent(msg)}`, '_blank');
                    }, i * 700);
                });
                setTimeout(() => setSending(false), selected.length * 700 + 500);
            };

            const reset = () => {
                setStep(1);
                setMode(null);
                setDistrict(null);
                setSelected([]);
                setCustomMessage('');
                setSelectedTemplate(null);
                setFirstName('');
                setLastName('');
                setCity('');
                setPhone('');
                setAgency('');
                setMatchedAddr('');
                setError('');
            };

            const districtData = district ? legislators[district] : null;

            return (
                <div className="app-container">
                    <header className="header">
                        <div className="header-icon">üî•</div>
                        <span className="bill-badge">SB 36</span>
                        <h1>SB 36 Action</h1>
                        <p>Insurance agents: Share your perspective on the utility wildfire liability bill with your legislators.</p>
                    </header>

                    <div className="alert-box">
                        <strong>Why this matters:</strong> SB 36 limits carriers' ability to recover costs when utilities cause fires. When insurers can't subrogate, those losses get spread across all policyholders ‚Äî meaning <strong>higher premiums</strong> and potentially <strong>harder-to-find coverage</strong> in fire-prone areas.
                    </div>

                    <div className="steps">
                        <div
                            className={`step ${step === 1 ? 'active' : ''} ${step > 1 ? 'completed' : ''}`}
                            onClick={() => goToStep(1)}
                        >
                            <span className="step-num">1</span> Select
                        </div>
                        <div
                            className={`step ${step === 2 ? 'active' : ''} ${step > 2 ? 'completed' : ''} ${!canGoToStep(2) ? 'disabled' : ''}`}
                            onClick={() => goToStep(2)}
                        >
                            <span className="step-num">2</span> Message
                        </div>
                        <div
                            className={`step ${step === 3 ? 'active' : ''} ${!canGoToStep(3) ? 'disabled' : ''}`}
                            onClick={() => goToStep(3)}
                        >
                            <span className="step-num">3</span> Send
                        </div>
                    </div>

                    {/* Step 1 */}
                    {step === 1 && (
                        <div className="card">
                            <div className="card-header">
                                <h2>Who do you want to contact?</h2>
                            </div>

                            <div className="tab-row">
                                <button className={`tab-btn ${mode === 'committee' ? 'active' : ''}`} onClick={() => { setMode('committee'); setSelected([]); setDistrict(null); }}>
                                    üèõÔ∏è Commerce & Energy Committee
                                    <span style={{ display: 'block', fontSize: '0.75rem', fontWeight: 'normal', opacity: 0.8, marginTop: '0.25rem' }}>They vote next on SB 36</span>
                                </button>
                                <button className={`tab-btn ${mode === 'district' ? 'active' : ''}`} onClick={() => { setMode('district'); setSelected([]); }}>
                                    üìç My District Legislators
                                    <span style={{ display: 'block', fontSize: '0.75rem', fontWeight: 'normal', opacity: 0.8, marginTop: '0.25rem' }}>Your local reps</span>
                                </button>
                            </div>

                            {mode === 'committee' && (
                                <>
                                    <div className="select-row">
                                        <button className="select-all-btn" onClick={selectAllCommittee}>
                                            {committee.every(m => isSelected(m)) ? '‚òê Deselect All' : '‚òë Select All 13'}
                                        </button>
                                        <span style={{ color: 'var(--text-mid)' }}>{selected.length} selected</span>
                                    </div>
                                    <div className="committee-grid">
                                        {committee.map((m, i) => (
                                            <div key={i} className={`member-chip ${isSelected(m) ? 'selected' : ''}`} onClick={() => toggle(m)}>
                                                <div className="chip-check">{isSelected(m) && '‚úì'}</div>
                                                <div className="chip-info">
                                                    <div className="chip-name">{m.name}</div>
                                                    <div className="chip-role">
                                                        {m.role !== 'Member' ? m.role : `District ${m.district}`} ‚Ä¢ {m.party}
                                                    </div>
                                                </div>
                                            </div>
                                        ))}
                                    </div>
                                </>
                            )}

                            {mode === 'district' && !district && (
                                <>
                                    <div className="form-group">
                                        <label>Your Office Address</label>
                                        <input ref={inputRef} type="text" placeholder="Start typing your address..." disabled={loading} />
                                        {error && <div className="error-message">{error}</div>}
                                        {loading && <div className="input-hint"><span className="spinner"></span>Looking up district...</div>}
                                    </div>
                                    <div className="form-group">
                                        <label>Or select your district</label>
                                        <select defaultValue="" onChange={(e) => {
                                            const n = parseInt(e.target.value);
                                            if (n && legislators[n]) { setDistrict(n); setMatchedAddr(`District ${n}`); }
                                        }}>
                                            <option value="" disabled>Choose district...</option>
                                            {Array.from({length: 35}, (_, i) => i + 1).map(n => (
                                                <option key={n} value={n}>District {n} - {legislators[n]?.members.map(m => m.name.split(' ').pop()).join(', ')}</option>
                                            ))}
                                        </select>
                                    </div>
                                </>
                            )}

                            {mode === 'district' && district && districtData && (
                                <>
                                    <div className="district-badge">üìç District {district}</div>
                                    {matchedAddr && <div className="input-hint" style={{ marginBottom: '1rem' }}>{matchedAddr}</div>}
                                    <div className="district-grid">
                                        {districtData.members.map((m, i) => (
                                            <div key={i} className={`leg-card ${isSelected(m) ? 'selected' : ''}`} onClick={() => toggle(m)}>
                                                <div className="leg-avatar">{m.name.split(' ').map(n => n[0]).join('')}</div>
                                                <div className="leg-info">
                                                    <div className="leg-name">{m.name}</div>
                                                    <div className="leg-role">State {m.chamber === 'Senate' ? 'Senator' : 'Representative'}</div>
                                                </div>
                                                <span className="leg-party">{m.party}</span>
                                            </div>
                                        ))}
                                    </div>
                                    <div className="reset-link" onClick={() => { setDistrict(null); setSelected([]); setMatchedAddr(''); }}>Change district</div>
                                </>
                            )}

                            {mode && (mode === 'committee' || district) && (
                                <div className="nav-row">
                                    <button className="btn btn-primary" onClick={() => setStep(2)} disabled={selected.length === 0}>
                                        Continue with {selected.length} ‚Üí
                                    </button>
                                </div>
                            )}
                        </div>
                    )}

                    {/* Step 2: Message */}
                    {step === 2 && (
                        <div className="card">
                            <div className="card-header">
                                <h2>Write your message</h2>
                                <p>Write your own message or start from a template below.</p>
                            </div>

                            <div className="form-row">
                                <div className="form-group">
                                    <label>Your Name *</label>
                                    <input type="text" value={fullName} onChange={e => {
                                        const parts = e.target.value.split(' ');
                                        setFirstName(parts[0] || '');
                                        setLastName(parts.slice(1).join(' ') || '');
                                    }} placeholder="Your full name" />
                                </div>
                                <div className="form-group">
                                    <label>City *</label>
                                    <input type="text" value={city} onChange={e => setCity(e.target.value)} placeholder="Your city" />
                                </div>
                            </div>

                            <div className="form-group">
                                <label>Your Agency</label>
                                <input type="text" value={agency} onChange={e => setAgency(e.target.value)} placeholder="Agency name (optional)" />
                            </div>

                            <div className="form-group">
                                <label>Your Message</label>
                                <textarea
                                    value={customMessage}
                                    onChange={e => { setCustomMessage(e.target.value); setSelectedTemplate(null); }}
                                    placeholder="Write your message here, or choose a template below to get started..."
                                />
                                <div className="input-hint">The greeting will be personalized for each legislator.</div>
                            </div>

                            <div className="template-section">
                                <div className="template-header">
                                    <h3>Or start from a template:</h3>
                                </div>
                                <div className="template-grid">
                                    {templates.map(t => (
                                        <div key={t.id} className={`template-card ${selectedTemplate?.id === t.id ? 'selected' : ''}`} onClick={() => applyTemplate(t)}>
                                            <div className="template-icon">{t.icon}</div>
                                            <div className="template-name">{t.name}</div>
                                            <div className="template-desc">{t.desc}</div>
                                        </div>
                                    ))}
                                </div>
                            </div>

                            <div className="nav-row">
                                <button className="btn btn-secondary" onClick={() => setStep(1)}>‚Üê Back</button>
                                <button className="btn btn-primary" onClick={() => setStep(3)} disabled={!fullName || !city}>
                                    Continue ‚Üí
                                </button>
                            </div>
                        </div>
                    )}

                    {/* Step 3: Send */}
                    {step === 3 && (
                        <div className="card">
                            <div className="card-header">
                                <h2>Review & Send</h2>
                            </div>

                            <div className="form-group">
                                <label>Sending to:</label>
                                <div className="recipients-row">
                                    {selected.map(l => (
                                        <span key={l.email} className="recipient-chip">
                                            {l.chamber === 'Senate' ? 'Sen.' : 'Rep.'} {l.name.split(' ').pop()}
                                        </span>
                                    ))}
                                </div>
                            </div>

                            <div className="form-group">
                                <label>Phone (optional)</label>
                                <input type="tel" value={phone} onChange={e => setPhone(e.target.value)} placeholder="(605) 555-1234" />
                            </div>

                            <details open>
                                <summary style={{ cursor: 'pointer', fontSize: '0.95rem', color: 'var(--blue-pro)', fontWeight: 600, marginBottom: '0.75rem' }}>
                                    Message Preview
                                </summary>
                                <div style={{
                                    background: 'var(--cream)',
                                    borderRadius: '10px',
                                    padding: '1.25rem',
                                    fontFamily: "'JetBrains Mono', monospace",
                                    fontSize: '0.85rem',
                                    lineHeight: '1.6',
                                    whiteSpace: 'pre-wrap',
                                    maxHeight: '250px',
                                    overflowY: 'auto'
                                }}>
                                    {getMessage(selected[0] || { name: 'Legislator', chamber: 'House' })}
                                </div>
                            </details>

                            <button className="btn btn-send" onClick={sendEmails} disabled={sending} style={{ marginTop: '1.5rem' }}>
                                {sending ? 'Opening emails...' : `üìß Send ${selected.length} Email${selected.length > 1 ? 's' : ''}`}
                            </button>
                            <div className="input-hint" style={{ textAlign: 'center', marginTop: '0.75rem' }}>
                                Opens your email client with message ready to send
                            </div>

                            <div className="nav-row">
                                <button className="btn btn-secondary" onClick={() => setStep(2)}>‚Üê Edit Message</button>
                            </div>

                            <div className="reset-link" onClick={reset}>Start over</div>
                        </div>
                    )}

                    <footer>
                        Not affiliated with the SD Legislature. Data from <a href="https://sdlegislature.gov" target="_blank">sdlegislature.gov</a>
                    </footer>
                </div>
            );
        }

        ReactDOM.createRoot(document.getElementById('root')).render(<App />);
    </script>
</body>
</html>
